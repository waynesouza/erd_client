<div class="diagram-container">
  <div class="toolbar" *ngIf="projectId">
    <div class="tool-group">
      <button class="tool-button" type="button" (click)="addEntity()" title="Add Table">
        <i class="bi bi-table"></i>
      </button>
    </div>
    <div class="tool-group">
      <button class="tool-button" type="button" (click)="selectRelationshipType('1:1')" title="One to One Relationship">
        <i class="bi bi-arrows-angle-contract"></i>
      </button>
      <button class="tool-button" type="button" (click)="selectRelationshipType('1:N')" title="One to Many Relationship">
        <i class="bi bi-arrow-up-right"></i>
      </button>
      <button class="tool-button" type="button" (click)="selectRelationshipType('N:N')" title="Many to Many Relationship">
        <i class="bi bi-arrows-angle-expand"></i>
      </button>
    </div>
    <div class="tool-group">
      <button class="tool-button" type="button" (click)="sendToServer()" title="Save Diagram">
        <i class="bi bi-check-circle"></i>
      </button>
    </div>
    <div class="tool-group">
      <button class="tool-button" type="button" (click)="exportDdl()" title="Export DDL">
        <i class="bi bi-download"></i>
      </button>
      <button class="tool-button" type="button" (click)="importDdl()" title="Import DDL">
        <i class="bi bi-upload"></i>
      </button>
    </div>
  </div>
  <div class="diagram-area" [class.full-width]="!projectId">
    <div id="myDiagramDiv" [class.dark-mode]="darkMode"></div>
    <input 
      #fileInput 
      type="file" 
      accept=".sql" 
      style="display: none" 
      (change)="onFileSelected($event)">
    <app-entity-edit-form
      *ngIf="isEntityEditorModalOpen"
      [entity]="selectedEntity"
      (entityUpdated)="handleSave($event)"
      (entityRemoved)="handleRemove($event)"
      (close)="closeEntityEditorModal()">
    </app-entity-edit-form>
  </div>
</div>
